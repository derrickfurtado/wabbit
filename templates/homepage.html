{% extends "base.html" %}

{% block title %}
<title>Homepage</title>
{% endblock %}

{% block body %}
<h1>Homepage</h1>

<section id="task_list">

</section>

<section id="active_job_list">
        <table>
            <h2>Active Jobs:</h2>
            <thead>
                <tr>
                    <th>Role Name</th>
                    <th>Company</th>
                    <th>Salary</th>
                    <th>Link to Job</th>
                    <th>Next Steps</th>
                    <th>Next Step Date</th>
                </tr>
            </thead>
            <tbody>
                {% for job in job_list %}
                    {% if not job.rejection and not job.interviewing and not job.job_offer and not job.accepted_offer and not job.ghosted %}
                        <tr>
                            <td><a href="{{ url_for('show_job_detail', job_id = job.id) }}">{{ job.role }}</a></td>
                            <td>{{ job.company.name }}</td>
                            {% if job.salary %}
                                <td>{{ "$ {:,.0f}".format(job.salary) }}</td>
                            {% else %}
                                <td>N/A</td>
                            {% endif %}
                            <td><a href="{{ job.link }}" target="_blank">Job Link</a></td>
                            {% if job.next_step == [] %}
                            <td>None</td>
                            <td>None</td>
                            {% else %}
                            <td>{{ job.next_step[0].description }}</td>
                            <td>{{ job.next_step[0].due_date.strftime('%b %d @ %H:%M%p') }}</td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
</section>
<section id="interviewing_list">
    <table>
        <table>
            <h2>Active Interview:</h2>
            <thead>
                <tr>
                    <th>Role Name</th>
                    <th>Company</th>
                    <th>Salary</th>
                    <th>Link to Job</th>
                    <th>Next Steps</th>
                    <th>Next Step Date</th>
                </tr>
            </thead>
            <tbody>
                {% for job in job_list %}
                    {% if job.interviewing %}
                        <tr>
                            <td><a href="{{ url_for('show_job_detail', job_id = job.id) }}">{{ job.role }}</a></td>
                            <td>{{ job.company.name }}</td>
                            {% if job.salary %}
                                <td>{{ "$ {:,.0f}".format(job.salary) }}</td>
                            {% else %}
                                <td>N/A</td>
                            {% endif %}
                            <td><a href="{{ job.link }}" target="_blank">Job Link</a></td>
                            {% if job.next_step == [] %}
                            <td>None</td>
                            <td>None</td>
                            {% else %}
                            <td>{{ job.next_step[0].description }}</td>
                            <td>{{ job.next_step[0].due_date.strftime('%b %d @ %H:%M%p') }}</td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
    </table>
</section>

<section id="offer_list">
    <h2>Offers Extended:</h2>
    {% for job in job_list %}
        {% if job.job_offer %}
            <ul><a href="{{ url_for('show_job_detail', job_id = job.id) }}">{{ job.role }}</a></ul>
        {% endif %}
    {% endfor %}
</section>



<section id="company_list">
    <table>
        <h2>Companies:</h2>
        <thead>
            <tr>
                <th>Company Name:</th>
                <th>Location:</th>
                <th>Industry</th>
                <th>Favorite</th>
            </tr>
        </thead>
        <tbody>
            {% for company in company_list %}
            <tr>
                <td>{{ company.name }}</td>
                <td>{{ company.location }}</td>
                <td>{{ company.industry }}</td>
                <td>{{ company.favorite }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>











{% endblock %}